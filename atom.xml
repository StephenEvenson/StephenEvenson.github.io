<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>è¿™é‡Œæ˜¯å²è’‚å¤«ğŸš¢</title>
  
  <subtitle>å²è’‚å¤«çš„å°å¤©åœ°</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://stephenevenson.github.io/"/>
  <updated>2020-04-29T10:37:30.197Z</updated>
  <id>https://stephenevenson.github.io/</id>
  
  <author>
    <name>Stephen Evenson</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>åœ¨HDFSä¸Šè¿è¡ŒSolr</title>
    <link href="https://stephenevenson.github.io/2020/04/29/%E5%9C%A8HDFS%E4%B8%8A%E8%BF%90%E8%A1%8CSolr/"/>
    <id>https://stephenevenson.github.io/2020/04/29/%E5%9C%A8HDFS%E4%B8%8A%E8%BF%90%E8%A1%8CSolr/</id>
    <published>2020-04-29T09:53:37.000Z</published>
    <updated>2020-04-29T10:37:30.197Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹:"></a>æµç¨‹:</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ su root</span><br></pre></td></tr></table></figure><ol><li>ç¡®ä¿HDFSä½¿ç”¨åˆ°çš„å„ä¸ªèŠ‚ç‚¹å¯ä»¥SSHå…å¯†è®¿é—®</li><li>å®‰è£…é…ç½®JDK1.8</li><li>å®‰è£…é…ç½®Hadsoop-2.9.2</li><li>å®‰è£…é…ç½®Solr-8</li></ol><p>&nbsp;</p><a id="more"></a><h1 id="SSHå…å¯†è®¿é—®"><a href="#SSHå…å¯†è®¿é—®" class="headerlink" title="SSHå…å¯†è®¿é—®"></a>SSHå…å¯†è®¿é—®</h1><p>å¦‚æœæƒ³è¦å…å¯†è®¿é—®æœ¬åœ°ï¼Œå³<code>ssh localhost</code>ï¼š</p><ol><li><p>å…ˆæŸ¥çœ‹ä¸€ä¸‹æ˜¯å¦å·²æœ‰å…¬é’¥å’Œå¯†é’¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># cd ~</span><br><span class="line"># ls .&#x2F;.ssh&#x2F;</span><br><span class="line">authorized_keys id_rsaid_rsa.pubknown_host</span><br></pre></td></tr></table></figure><p>å¦‚æœå·²ç»å­˜åœ¨<code>id_rsa</code>å’Œ<code>id_rsa.pub</code>ï¼Œ åˆ™è·³è¿‡æ­¥éª¤2</p></li><li><p>å¦‚æœå…¬é’¥å’Œå¯†é’¥ä¸å­˜åœ¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ssh-keygen -t rsa</span><br><span class="line"># cat .&#x2F;.ssh&#x2F;id_rsa.pub &gt;&gt; .&#x2F;.ssh&#x2F;!</span><br></pre></td></tr></table></figure><p>[image-20190902162637293](/Users/zhangruntian/Library/Application Support/typora-user-images/image-20190902162637293.png)</p><p>æ·»åŠ å®Œå…¬é’¥åï¼Œæµ‹è¯•ä¸€ä¸‹æ˜¯å¦æˆåŠŸï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># ssh localhost</span><br></pre></td></tr></table></figure><p>å¦‚æœæƒ³è¿™æ ·æ˜¾ç¤ºä¸Šæ¬¡ç™»å½•æ—¶é—´ï¼Œæ²¡è¦æ˜¾ç¤ºè¢«æ‹’ç»ï¼Œåˆ™è¡¨æ˜ç™»å½•æˆåŠŸã€‚</p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g6l9638vhbj30ti0gijty.jpg" alt="å±å¹•å¿«ç…§ 2019-09-02 16.28.27"></p><p>å¦‚æœåœ¨äº‘æœåŠ¡å™¨ä¸Šï¼Œæ·»åŠ å…¬é’¥åä»ç„¶æ— æ³•ç™»å½•æˆåŠŸï¼Œåˆ™å¯èƒ½éœ€è¦é‡ç½®ä¸€ä¸‹é…ç½®ã€‚</p><p>&nbsp;</p></li></ol><h1 id="å®‰è£…é…ç½®Hadoop-2-9-2"><a href="#å®‰è£…é…ç½®Hadoop-2-9-2" class="headerlink" title="å®‰è£…é…ç½®Hadoop-2.9.2"></a>å®‰è£…é…ç½®Hadoop-2.9.2</h1><p>ä¹‹å‰å®‰è£…è¿‡Hadoop-3.1.2å’ŒHadoop-3.2.0ï¼Œä½†æ— æ³•è®©Solr-8.2.0åœ¨HDFSä¸Šæ­£å¸¸è¿è¡Œï¼Œä¼šæŠ¥åˆå§‹åŒ–é”™è¯¯ã€‚ä½†ä½¿ç”¨Hadoop-2.9.2å´å¹¶ä¸å­˜åœ¨è¿™ä¸ªé—®é¢˜ã€‚</p>   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># cd &#x2F;usr&#x2F;local&#x2F;</span><br><span class="line"># wget http:&#x2F;&#x2F;mirror.bit.edu.cn&#x2F;apache&#x2F;hadoop&#x2F;common&#x2F;hadoop-2.9.2&#x2F;hadoop-2.9.2.tar.gz</span><br><span class="line"># tar -xvf hadoop-2.9.2.tar.gz</span><br><span class="line"># mv hadoop-2.9.2 hadoop</span><br></pre></td></tr></table></figure><h2 id="è®¾ç½®Hadoopç¯å¢ƒå˜é‡"><a href="#è®¾ç½®Hadoopç¯å¢ƒå˜é‡" class="headerlink" title="è®¾ç½®Hadoopç¯å¢ƒå˜é‡"></a>è®¾ç½®Hadoopç¯å¢ƒå˜é‡</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># vim &#x2F;etc&#x2F;profile</span><br></pre></td></tr></table></figure><p>åœ¨æ–‡ä»¶ä¸­æ·»åŠ ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> HADOOP_HOME=/usr/<span class="built_in">local</span>/hadoop </span><br><span class="line"><span class="built_in">export</span> HADOOP_MAPRED_HOME=<span class="variable">$HADOOP_HOME</span> </span><br><span class="line"><span class="built_in">export</span> HADOOP_COMMON_HOME=<span class="variable">$HADOOP_HOME</span></span><br><span class="line"><span class="built_in">export</span> HADOOP_HDFS_HOME=<span class="variable">$HADOOP_HOME</span> </span><br><span class="line"><span class="built_in">export</span> YARN_HOME=<span class="variable">$HADOOP_HOME</span> </span><br><span class="line"><span class="built_in">export</span> HADOOP_COMMON_LIB_NATIVE_DIR=<span class="variable">$HADOOP_HOME</span>/lib/native </span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$HADOOP_HOME</span>/sbin:<span class="variable">$HADOOP_HOME</span>/bin </span><br><span class="line"><span class="built_in">export</span> HADOOP_INSTALL=<span class="variable">$HADOOP_HOME</span></span><br></pre></td></tr></table></figure><p>ç„¶åæŒ‰escé”®å’Œ<code>:wq</code>ä¿å­˜é€€å‡ºï¼Œå¹¶ä½¿ä¹‹ç”Ÿæ•ˆï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~# source &#x2F;etc&#x2F;profile</span><br></pre></td></tr></table></figure><h2 id="ä¸ºHadoopæ·»åŠ JAVA-HOME"><a href="#ä¸ºHadoopæ·»åŠ JAVA-HOME" class="headerlink" title="ä¸ºHadoopæ·»åŠ JAVA_HOME"></a>ä¸ºHadoopæ·»åŠ JAVA_HOME</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># cd $HADOOP_HOME&#x2F;etc&#x2F;hadoop&#x2F;</span><br></pre></td></tr></table></figure><p>ç»™è„šæœ¬<code>hadoop-env.sh</code>å’Œ<code>yarn-env.sh</code>æ·»åŠ JAVA_HOMEçš„è·¯å¾„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;jdk1.8.0_221</span><br></pre></td></tr></table></figure><h2 id="é…ç½®Hadoopçš„ä¸»è¦æ–‡ä»¶"><a href="#é…ç½®Hadoopçš„ä¸»è¦æ–‡ä»¶" class="headerlink" title="é…ç½®Hadoopçš„ä¸»è¦æ–‡ä»¶"></a>é…ç½®Hadoopçš„ä¸»è¦æ–‡ä»¶</h2><h3 id="core-site-xml"><a href="#core-site-xml" class="headerlink" title="core-site.xml"></a>core-site.xml</h3><p>åœ¨<code>&lt;configuration&gt;</code>å’Œ<code>&lt;/configuration&gt;</code>ä¹‹é—´æ·»åŠ ä»¥ä¸‹å­—æ®µï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span>     </span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.default.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span>     </span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://localhost:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span>   </span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>io.file.buffer.size<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>131072<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:/home/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span>Abase for other temporary directories.<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.proxyuser.hduser.hosts<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>*<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.proxyuser.hduser.groups<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>*<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>fs.default.name</code>ç”¨äºå­˜æ”¾solrçš„ç´¢å¼•ï¼Œå€¼è®¾ç½®ä¸º<code>localhost</code>åˆ™åªå…è®¸è¿è¡Œåœ¨æœ¬åœ°çš„Solrè®¿é—®ï¼Œå¯ä»¥æ”¹ä¸º<code>0.0.0.0</code>ä»¥å…è®¸éæœ¬åœ°çš„solrè®¿é—®ã€‚</p><h3 id="hdfs-site-xml"><a href="#hdfs-site-xml" class="headerlink" title="hdfs-site.xml"></a>hdfs-site.xml</h3><p>åœ¨<code>&lt;configuration&gt;</code>å’Œ<code>&lt;/configuration&gt;</code>ä¹‹é—´æ·»åŠ ä»¥ä¸‹å­—æ®µï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span>     </span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span>     </span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>3<span class="tag">&lt;/<span class="name">value</span>&gt;</span>   </span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span>     </span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.name.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:///home/hadoopinfra/hdfs/namenode<span class="tag">&lt;/<span class="name">value</span>&gt;</span>   </span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span>     </span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.data.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:///home/hadoopinfra/hdfs/datanode<span class="tag">&lt;/<span class="name">value</span>&gt;</span>   </span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.http.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>0.0.0.0:50070<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.webhdfs.enabled<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.permissions.enabled<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>dfs.http.address</code>å³hdfsçš„æœåŠ¡åœ°å€ï¼Œå¦‚æœåœ°å€å¡«æˆ<code>localhost:50070</code>åˆ™æ— æ³•è¿œç¨‹è®¿é—®ã€‚hadoop-3ä»¥åï¼Œé»˜è®¤ç«¯å£å·ä¸º9870.</p><p>æ³¨æ„æ¯æ¬¡æ‰§è¡Œ<code>hdfs namenode -format</code>ä¹‹å‰ï¼Œæ¸…é™¤namenodeå’Œdatanodeä¸‹çš„currentæ–‡ä»¶ã€‚</p><h3 id="yarn-site-xml"><a href="#yarn-site-xml" class="headerlink" title="yarn-site.xml"></a>yarn-site.xml</h3><p>åœ¨<code>&lt;configuration&gt;</code>å’Œ<code>&lt;/configuration&gt;</code>ä¹‹é—´æ·»åŠ ä»¥ä¸‹å­—æ®µï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span>     </span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span>     </span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services.mapreduce.shuffle.class<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.apache.hadoop.mapred.ShuffleHandler<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>0.0.0.0<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœå°†<code>yarn.resourcemanager.hostname</code>çš„å€¼å¡«ä¸º<code>localhost</code>ï¼Œåˆ™å¯èƒ½å¯¼è‡´æ— æ³•è¿œç¨‹è®¿é—®hadoopçš„8088ç«¯å£ã€‚</p><h3 id="mapred-site-xml"><a href="#mapred-site-xml" class="headerlink" title="mapred-site.xml"></a>mapred-site.xml</h3><p>å¦‚æœæ²¡æœ‰<code>mapred-site.xml</code>æ–‡ä»¶ï¼Œåˆ™ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># cp mapred-site.xml.example mapred-site.xml</span><br></pre></td></tr></table></figure><p>åœ¨<code>&lt;configuration&gt;</code>å’Œ<code>&lt;/configuration&gt;</code>ä¹‹é—´æ·»åŠ ä»¥ä¸‹å­—æ®µï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd</span><br></pre></td></tr></table></figure><h2 id="è¿è¡ŒHadoop"><a href="#è¿è¡ŒHadoop" class="headerlink" title="è¿è¡ŒHadoop"></a>è¿è¡ŒHadoop</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># cd ~</span><br><span class="line"># hdfs namenode -format</span><br><span class="line"># start-dfs.sh</span><br><span class="line"># start-yarn.sh</span><br></pre></td></tr></table></figure><p>è¿è¡Œå®Œåå¯ä»¥åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€hadoopçš„æœåŠ¡<code>http://localhost:50070</code>ï¼Œå’Œç®¡ç†ç•Œé¢<code>http://localhost:8088</code>ã€‚</p><p>å¦‚æœåœ¨è¿œç¨‹è®¿é—®ï¼Œè¿™é‡Œ<code>localhost</code>æ”¹ä¸ºè¿è¡Œhadoopçš„æœåŠ¡å™¨çš„IPï¼Œ50070ç«¯å£åœ¨hadoop-3ä¹‹åæ”¹ä¸º9870ã€‚</p><h1 id="å®‰è£…é…ç½®Solr-8-2-0"><a href="#å®‰è£…é…ç½®Solr-8-2-0" class="headerlink" title="å®‰è£…é…ç½®Solr-8.2.0"></a>å®‰è£…é…ç½®Solr-8.2.0</h1><h2 id="ä¸‹è½½Solr-8-2-0"><a href="#ä¸‹è½½Solr-8-2-0" class="headerlink" title="ä¸‹è½½Solr-8.2.0"></a>ä¸‹è½½Solr-8.2.0</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># cd ~ </span><br><span class="line"># wget http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;apache&#x2F;lucene&#x2F;solr&#x2F;8.2.0&#x2F;solr-8.2.0.tgz</span><br><span class="line"># tar -xvf solr-8.2.0.tgz</span><br><span class="line"># cd solr-8.2.0</span><br></pre></td></tr></table></figure><h2 id="è¿è¡ŒSolr"><a href="#è¿è¡ŒSolr" class="headerlink" title="è¿è¡ŒSolr"></a>è¿è¡ŒSolr</h2><ol><li><p>å¯åŠ¨solr</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># bin&#x2F;solr start -force</span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ core</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># bin&#x2F;solr create -c core1 -force</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹coreçš„solrconfig.xmlæ–‡ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># vim server&#x2F;solr&#x2F;core1&#x2F;conf&#x2F;solrconfig.xml</span><br></pre></td></tr></table></figure><p>è¾“å…¥<code>/directoryFactory</code>å›è½¦åæ‰¾åˆ°ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">directoryFactory</span> <span class="attr">name</span>=<span class="string">"DirectoryFactory"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">class</span>=<span class="string">"$&#123;solr.directoryFactory:solr.NRTCachingDirectory     Factory&#125;"</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>å°†å…¶åˆ é™¤ï¼Œæ”¹ä¸ºï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">directoryFactory</span> <span class="attr">name</span>=<span class="string">"DirectoryFactory"</span> <span class="attr">class</span>=<span class="string">"solr.HdfsDirectoryFactory"</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">str</span> <span class="attr">name</span>=<span class="string">"solr.hdfs.home"</span>&gt;</span>hdfs://localhost:9000</span><br><span class="line">    /solr<span class="tag">&lt;/<span class="name">str</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">bool</span> <span class="attr">name</span>=<span class="string">"solr.hdfs.blockcache.enabled"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">bool</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">int</span> <span class="attr">name</span>=<span class="string">"solr.hdfs.blockcache.slab.count"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">int</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">bool</span> <span class="attr">name</span>=<span class="string">"solr.hdfs.blockcache.direct.memory.allocation"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">bool</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">int</span> <span class="attr">name</span>=<span class="string">"solr.hdfs.blockcache.blocksperbank"</span>&gt;</span>16384<span class="tag">&lt;/<span class="name">int</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">bool</span> <span class="attr">name</span>=<span class="string">"solr.hdfs.blockcache.read.enabled"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">bool</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">bool</span> <span class="attr">name</span>=<span class="string">"solr.hdfs.blockcache.whrite.enabled"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">bool</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">bool</span> <span class="attr">name</span>=<span class="string">"solr.hdfs.nrtcachingdirectory.enable"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">bool</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">int</span> <span class="attr">name</span>=<span class="string">"solr.hdfs.nrtcachingdirectory.maxmergesizemb"</span>&gt;</span>16<span class="tag">&lt;/<span class="name">int</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">int</span> <span class="attr">name</span>=<span class="string">"solr.hdfs.nrtcachingdirectory.maxcachedmb"</span>&gt;</span>192<span class="tag">&lt;/<span class="name">int</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">directoryFactory</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœsolrå’Œhadoopè¿è¡Œåœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œåˆ™å°†<code>solr.hdfs.home</code>ä¸­çš„localhostæ”¹ä¸ºhadoopæœåŠ¡å™¨çš„IPåœ°å€ã€‚</p><p>è¾“å…¥<code>/lockType</code>å›è½¦åæ‰¾åˆ°ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">lockType</span>&gt;</span>$&#123;solr.lock.type:native&#125;<span class="tag">&lt;/<span class="name">lockType</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å°†å…¶æ”¹ä¸ºï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">lockType</span>&gt;</span>$&#123;solr.lock.type:hdfs&#125;<span class="tag">&lt;/<span class="name">lockType</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨HDFSä¸­åˆ›å»ºæ–‡ä»¶å¤¹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hadoop fs -mkdir &#x2F;solr</span><br><span class="line">hadoop fs -ls &#x2F;</span><br></pre></td></tr></table></figure><p>å¦‚æœçœ‹è§è¾“å‡º<code>solr</code>çš„æ–‡ä»¶ï¼Œè¡¨æ˜åˆ›å»ºæˆåŠŸ</p></li><li><p>ç„¶åé‡æ–°å¯åŠ¨solrï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># bin&#x2F;solr restart -force</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œsolrä¼šå°†ç´¢å¼•æ”¾å…¥hdfsè¿›è¡Œç®¡ç†ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g6ldummbiuj30q408uq3u.jpg" alt="image-20190902191025477"></p></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;æµç¨‹&quot;&gt;&lt;a href=&quot;#æµç¨‹&quot; class=&quot;headerlink&quot; title=&quot;æµç¨‹:&quot;&gt;&lt;/a&gt;æµç¨‹:&lt;/h1&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ su root&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;ol&gt;
&lt;li&gt;ç¡®ä¿HDFSä½¿ç”¨åˆ°çš„å„ä¸ªèŠ‚ç‚¹å¯ä»¥SSHå…å¯†è®¿é—®&lt;/li&gt;
&lt;li&gt;å®‰è£…é…ç½®JDK1.8&lt;/li&gt;
&lt;li&gt;å®‰è£…é…ç½®Hadsoop-2.9.2&lt;/li&gt;
&lt;li&gt;å®‰è£…é…ç½®Solr-8&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
    
    </summary>
    
    
      <category term="å¤§æ•°æ®" scheme="https://stephenevenson.github.io/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
    
      <category term="Solr" scheme="https://stephenevenson.github.io/tags/Solr/"/>
    
      <category term="Hadoop" scheme="https://stephenevenson.github.io/tags/Hadoop/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://stephenevenson.github.io/2020/04/26/hello-world/"/>
    <id>https://stephenevenson.github.io/2020/04/26/hello-world/</id>
    <published>2020-04-25T17:38:48.897Z</published>
    <updated>2020-04-25T17:38:48.898Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
    
    
  </entry>
  
</feed>
